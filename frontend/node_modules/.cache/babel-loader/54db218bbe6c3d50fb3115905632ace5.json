{"ast":null,"code":"import _classCallCheck from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/atak/cyberbase/frontend/src/components/Admin.js\";\nimport React from 'react';\nimport '../styles.css';\nimport messageService from '../services/messages';\n\nvar Admin =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Admin, _React$Component);\n\n  function Admin() {\n    var _this;\n\n    _classCallCheck(this, Admin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Admin).call(this));\n\n    _this.viewMessages = function () {\n      var messagesToRender = [];\n      var messages = _this.state.messages;\n\n      var _loop = function _loop(i) {\n        messagesToRender.push(React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }, messages[i].content, \" (\", messages[i].user.username, \")\", React.createElement(\"button\", {\n          type: \"submit\",\n          onClick: function onClick() {\n            return _this.deleteMessage(messages[i].id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, \"Delete\")));\n      };\n\n      for (var i = 0; i < messages.length; i++) {\n        _loop(i);\n      }\n\n      return messagesToRender;\n    };\n\n    _this.deleteAllMessagesButton = function () {\n      if (_this.state.messages.length > 0) {\n        return React.createElement(\"button\", {\n          class: \"btn btn-primary btn-block\",\n          type: \"submit\",\n          onClick: _this.deleteMessage(_this.state.messages[0]),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }, \"Delte all messages\");\n      }\n\n      return \"\";\n    };\n\n    _this.deleteMessage = function (id) {\n      messageService.remove(id);\n    };\n\n    _this.state = {\n      messages: []\n    };\n    return _this;\n  }\n\n  _createClass(Admin, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var loggedUserJSON = window.localStorage.getItem('loggedUser');\n\n      if (loggedUserJSON) {\n        var user = JSON.parse(loggedUserJSON);\n\n        if (user.access !== \"admin\") {\n          window.location(\"http://localhost:3000\");\n        }\n      } else {\n        window.location(\"http://localhost:3000\");\n      }\n\n      messageService.getAll().then(function (messages) {\n        _this2.setState({\n          messages: messages\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        class: \"login-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        class: \"sr-only\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"Insecure cyberbase app\"), React.createElement(\"h2\", {\n        class: \"sr-only\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"Admin tools\"), React.createElement(\"div\", {\n        class: \"illustration\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"icon ion-ios-locked-outline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      })), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, this.viewMessages()), React.createElement(\"a\", {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Back to main page\")));\n    }\n  }]);\n\n  return Admin;\n}(React.Component);\n\nexport default Admin;","map":{"version":3,"sources":["/home/atak/cyberbase/frontend/src/components/Admin.js"],"names":["React","messageService","Admin","viewMessages","messagesToRender","messages","state","i","push","content","user","username","deleteMessage","id","length","deleteAllMessagesButton","remove","loggedUserJSON","window","localStorage","getItem","JSON","parse","access","location","getAll","then","setState","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../styles.css'\nimport messageService from '../services/messages'\n\nclass Admin extends React.Component {\n\n    constructor() {\n        super()\n        this.state = {\n            messages: []\n        }\n    }\n\n    componentWillMount() {\n        const loggedUserJSON = window.localStorage.getItem('loggedUser')\n        if (loggedUserJSON) {\n            const user = JSON.parse(loggedUserJSON)\n            if (user.access !== \"admin\") {\n                window.location(\"http://localhost:3000\")\n            }\n        } else {\n            window.location(\"http://localhost:3000\")\n        }\n        messageService\n            .getAll()\n            .then(messages => {\n                this.setState({ messages })\n            })\n    }\n\n    viewMessages = () => {\n        let messagesToRender = [];\n        let messages = this.state.messages\n        for (let i = 0; i < messages.length; i++) {\n            messagesToRender.push(<li>{messages[i].content} ({messages[i].user.username})\n            <button type=\"submit\" onClick={() => this.deleteMessage(messages[i].id)}>Delete</button></li>)\n        }\n        return messagesToRender\n    }\n\n    deleteAllMessagesButton = () => {\n        if (this.state.messages.length > 0) {\n            return <button class=\"btn btn-primary btn-block\" type=\"submit\" onClick={this.deleteMessage(this.state.messages[0])}>Delte all messages</button>\n        }\n        return \"\"\n    }\n\n    deleteMessage = (id) => {\n        messageService.remove(id)\n    }\n\n    render() {\n        return (\n            <div class=\"login-dark\">\n                <form>\n                    <h1 class=\"sr-only\">Insecure cyberbase app</h1>\n                    <h2 class=\"sr-only\">Admin tools</h2>\n                    <div class=\"illustration\">\n                        <i class=\"icon ion-ios-locked-outline\"></i>\n                    </div>\n                    <ul>\n                        {this.viewMessages()}\n                    </ul>\n                    <a href='/'>Back to main page</a>\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}