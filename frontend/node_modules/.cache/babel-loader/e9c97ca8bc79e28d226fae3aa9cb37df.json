{"ast":null,"code":"import _defineProperty from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/atak/cyberbase/frontend/src/components/LoginForm.js\";\nimport React from 'react';\nimport '../styles.css';\nimport loginService from '../services/login';\nimport messageService from '../services/messages';\n\nvar LoginForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LoginForm, _React$Component);\n\n  function LoginForm() {\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginForm).call(this));\n\n    _this.login =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                _context.prev = 1;\n                _context.next = 4;\n                return loginService.login({\n                  username: _this.state.username,\n                  password: _this.state.password\n                });\n\n              case 4:\n                user = _context.sent;\n                window.localStorage.setItem('loggedUser!', JSON.stringify(user));\n                messageService.setToken(user.token);\n\n                _this.setState({\n                  username: '',\n                  password: '',\n                  user: user\n                });\n\n                _context.next = 14;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n\n                _this.setState({\n                  error: 'failed login!'\n                });\n\n                setTimeout(function () {\n                  _this.setState({\n                    error: null\n                  });\n                }, 5000);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.state = {\n      username: 'Matti',\n      password: ''\n    };\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        class: \"login-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        method: \"post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        class: \"sr-only\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, \"Insecure cyberbase app\"), React.createElement(\"h2\", {\n        class: \"sr-only\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"Login Form\"), React.createElement(\"div\", {\n        class: \"illustration\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"icon ion-ios-locked-outline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.username,\n        onChange: this.handleChange,\n        class: \"form-control\",\n        type: \"username\",\n        name: \"username\",\n        placeholder: \"Username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.password,\n        onChange: this.handleChange,\n        class: \"form-control\",\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        class: \"btn btn-primary btn-block\",\n        type: \"submit\",\n        onClick: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"Log In\"))));\n    }\n  }]);\n\n  return LoginForm;\n}(React.Component);\n\nexport default LoginForm;","map":{"version":3,"sources":["/home/atak/cyberbase/frontend/src/components/LoginForm.js"],"names":["React","loginService","messageService","LoginForm","login","event","preventDefault","username","state","password","user","window","localStorage","setItem","JSON","stringify","setToken","token","setState","error","setTimeout","handleChange","target","name","value","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../styles.css'\nimport loginService from '../services/login'\nimport messageService from '../services/messages'\n\nclass LoginForm extends React.Component {\n\n\tconstructor() {\n\t\tsuper()\n\t\tthis.state = {\n\t\t\tusername: 'Matti',\n\t\t\tpassword: ''\n\t\t}\n\t}\n\n\tlogin = async (event) => {\n\t\tevent.preventDefault()\n\t\ttry {\n\t\t\tconst user = await loginService.login({\n\t\t\t\tusername: this.state.username,\n\t\t\t\tpassword: this.state.password\n\t\t\t})\n\n\t\t\twindow.localStorage.setItem('loggedUser!', JSON.stringify(user))\n\t\t\tmessageService.setToken(user.token)\n\t\t\tthis.setState({ username: '', password: '', user })\n\t\t} catch (exception) {\n\t\t\tthis.setState({\n\t\t\t\terror: 'failed login!',\n\t\t\t})\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.setState({ error: null })\n\t\t\t}, 5000)\n\t\t}\n\t}\n\n\thandleChange = (event) => {\n\t\tthis.setState({ [event.target.name]: event.target.value })\n\t  }\n\n\trender() {\n\t\treturn (\n\t\t\t<div class=\"login-dark\">\n\t\t\t\t<form method=\"post\">\n\t\t\t\t\t<h1 class=\"sr-only\">Insecure cyberbase app</h1>\n\t\t\t\t\t<h2 class=\"sr-only\">Login Form</h2>\n\t\t\t\t\t<div class=\"illustration\">\n\t\t\t\t\t\t<i class=\"icon ion-ios-locked-outline\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<input value={this.state.username} onChange={this.handleChange} class=\"form-control\" type=\"username\" name=\"username\" placeholder=\"Username\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<input value={this.state.password} onChange={this.handleChange} class=\"form-control\" type=\"password\" name=\"password\" placeholder=\"Password\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<button class=\"btn btn-primary btn-block\" type=\"submit\" onClick={this.login}>Log In</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}