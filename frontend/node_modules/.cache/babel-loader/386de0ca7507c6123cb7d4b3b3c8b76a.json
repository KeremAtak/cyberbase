{"ast":null,"code":"import _defineProperty from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/atak/cyberbase/frontend/src/components/LoginForm.js\";\nimport React from 'react';\nimport '../styles.css';\nimport loginService from '../services/login';\nimport messageService from '../services/messages';\n\nvar LoginForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LoginForm, _React$Component);\n\n  function LoginForm() {\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginForm).call(this));\n\n    _this.login =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                _context.prev = 1;\n                console.log('dsadsa');\n                _context.next = 5;\n                return loginService.login({\n                  username: _this.state.username,\n                  password: _this.state.password\n                });\n\n              case 5:\n                user = _context.sent;\n                console.log('dsadsa');\n                window.sessionStorage.setItem('loggedUser', JSON.stringify(user));\n                console.log('onnistui');\n                window.location.replace(\"http://localhost:3000\");\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](1);\n                alert('Error! Failed login.');\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 12]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.state = {\n      username: '',\n      password: ''\n    };\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.username + ' ' + this.state.password);\n      return React.createElement(\"div\", {\n        class: \"login-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        method: \"post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        class: \"sr-only\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, \"Insecure cyberbase app\"), React.createElement(\"h2\", {\n        class: \"sr-only\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"div\", {\n        class: \"illustration\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"icon ion-ios-locked-outline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.username,\n        onChange: this.handleChange,\n        class: \"form-control\",\n        type: \"username\",\n        name: \"username\",\n        placeholder: \"Username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.password,\n        onChange: this.handleChange,\n        class: \"form-control\",\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        class: \"btn btn-primary btn-block\",\n        type: \"submit\",\n        onClick: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Log In\")), React.createElement(\"a\", {\n        href: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"No account? Click here to register.\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }), React.createElement(\"a\", {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Back to main page\")));\n    }\n  }]);\n\n  return LoginForm;\n}(React.Component);\n\nexport default LoginForm;","map":{"version":3,"sources":["/home/atak/cyberbase/frontend/src/components/LoginForm.js"],"names":["React","loginService","messageService","LoginForm","login","event","preventDefault","console","log","username","state","password","user","window","sessionStorage","setItem","JSON","stringify","location","replace","alert","handleChange","setState","target","name","value","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../styles.css'\nimport loginService from '../services/login'\nimport messageService from '../services/messages'\n\nclass LoginForm extends React.Component {\n\n\tconstructor() {\n\t\tsuper()\n\t\tthis.state = {\n\t\t\tusername: '',\n\t\t\tpassword: ''\n\t\t}\n\t}\n\n\tlogin = async (event) => {\n\t\tevent.preventDefault()\n\n\t\ttry {\n\t\t\tconsole.log('dsadsa')\n\t\t\tconst user = await loginService.login({\n\t\t\t\tusername: this.state.username,\n\t\t\t\tpassword: this.state.password\n\t\t\t})\n\t\t\tconsole.log('dsadsa')\n\t\t\twindow.sessionStorage.setItem('loggedUser', JSON.stringify(user))\n\t\t\tconsole.log('onnistui')\n\t\t\twindow.location.replace(\"http://localhost:3000\");\n\t\t} catch (exception) {\n\t\t\talert('Error! Failed login.')\n\t\t}\n\t}\n\n\thandleChange = (event) => {\n\t\tthis.setState({ [event.target.name]: event.target.value })\n\t}\n\n\trender() {\n\t\tconsole.log(this.state.username + ' ' + this.state.password)\n\t\treturn (\n\t\t\t<div class=\"login-dark\">\n\t\t\t\t<form method=\"post\">\n\t\t\t\t\t<h1 class=\"sr-only\">Insecure cyberbase app</h1>\n\t\t\t\t\t<h2 class=\"sr-only\">Login</h2>\n\t\t\t\t\t<div class=\"illustration\">\n\t\t\t\t\t\t<i class=\"icon ion-ios-locked-outline\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<input value={this.state.username} onChange={this.handleChange} class=\"form-control\" type=\"username\" name=\"username\" placeholder=\"Username\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<input value={this.state.password} onChange={this.handleChange} class=\"form-control\" type=\"password\" name=\"password\" placeholder=\"Password\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<button class=\"btn btn-primary btn-block\" type=\"submit\" onClick={this.login}>Log In</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a href='/register'>No account? Click here to register.</a>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<a href='/'>Back to main page</a>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}