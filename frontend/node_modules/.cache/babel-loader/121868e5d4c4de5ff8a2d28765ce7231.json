{"ast":null,"code":"import _objectWithoutProperties from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/atak/cyberbase/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/atak/cyberbase/frontend/src/ProtectedRoute.js\";\nimport React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nvar ProtectedRoute =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ProtectedRoute, _React$Component);\n\n  function ProtectedRoute() {\n    var _this;\n\n    _classCallCheck(this, ProtectedRoute);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProtectedRoute).call(this));\n\n    _this.waitForUserLoading = function () {\n      if (typeof _this.state.user === undefined) {\n        setTimeout(_this.waitForUserLoading(), 250);\n      }\n    };\n\n    _this.isAuthenticated = function () {\n      console.log(_this.state.user);\n\n      _this.waitForUserLoading();\n\n      if (_this.state.user !== null) {\n        if (_this.state.user.username === \"Matti\") {\n          return true;\n        }\n\n        return false;\n      } else {\n        return false;\n      }\n    };\n\n    _this.state = {\n      user: null\n    };\n    return _this;\n  }\n\n  _createClass(ProtectedRoute, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var loggedUserJSON = window.localStorage.getItem('loggedUser');\n\n      if (loggedUserJSON) {\n        var user = JSON.parse(loggedUserJSON);\n        console.log(user);\n        this.setState({\n          user: user\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          Component = _this$props.component,\n          props = _objectWithoutProperties(_this$props, [\"component\"]);\n\n      return React.createElement(Route, Object.assign({}, props, {\n        render: function render(props) {\n          return _this2.isAuthenticated ? React.createElement(Component, Object.assign({}, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 49\n            },\n            __self: this\n          })) : React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 50\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ProtectedRoute;\n}(React.Component);\n\nexport default ProtectedRoute;","map":{"version":3,"sources":["/home/atak/cyberbase/frontend/src/ProtectedRoute.js"],"names":["React","Route","Redirect","ProtectedRoute","waitForUserLoading","state","user","undefined","setTimeout","isAuthenticated","console","log","username","loggedUserJSON","window","localStorage","getItem","JSON","parse","setState","props","Component","component"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,kBAAhC;;IAEMC,c;;;;;AAEF,4BAAc;AAAA;;AAAA;;AACV;;AADU,UAgBdC,kBAhBc,GAgBO,YAAM;AACvB,UAAI,OAAO,MAAKC,KAAL,CAAWC,IAAlB,KAA2BC,SAA/B,EAA0C;AACtCC,QAAAA,UAAU,CAAC,MAAKJ,kBAAL,EAAD,EAA4B,GAA5B,CAAV;AACH;AACJ,KApBa;;AAAA,UAsBdK,eAtBc,GAsBI,YAAM;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKN,KAAL,CAAWC,IAAvB;;AACA,YAAKF,kBAAL;;AACA,UAAI,MAAKC,KAAL,CAAWC,IAAX,KAAoB,IAAxB,EAA8B;AAC1B,YAAI,MAAKD,KAAL,CAAWC,IAAX,CAAgBM,QAAhB,KAA6B,OAAjC,EAA0C;AACtC,iBAAO,IAAP;AACH;;AACD,eAAO,KAAP;AACH,OALD,MAKO;AACH,eAAO,KAAP;AACH;AACJ,KAjCa;;AAEV,UAAKP,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE;AADG,KAAb;AAFU;AAKb;;;;yCAEoB;AACjB,UAAMO,cAAc,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,YAA5B,CAAvB;;AACA,UAAIH,cAAJ,EAAoB;AAChB,YAAMP,IAAI,GAAGW,IAAI,CAACC,KAAL,CAAWL,cAAX,CAAb;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAYL,IAAZ;AACA,aAAKa,QAAL,CAAc;AAAEb,UAAAA,IAAI,EAAJA;AAAF,SAAd;AACH;AACJ;;;6BAqBQ;AAAA;;AAAA,wBACsC,KAAKc,KAD3C;AAAA,UACcC,SADd,eACGC,SADH;AAAA,UAC4BF,KAD5B;;AAGL,aACI,oBAAC,KAAD,oBACQA,KADR;AAEI,QAAA,MAAM,EAAE,gBAAAA,KAAK;AAAA,iBACT,MAAI,CAACX,eAAL,GACI,oBAAC,SAAD,oBAAeW,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,GAEI,oBAAC,QAAD;AAAU,YAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHK;AAAA,SAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADJ;AAUH;;;;EAlDwBpB,KAAK,CAACqB,S;;AAqDnC,eAAelB,cAAf","sourcesContent":["import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nclass ProtectedRoute extends React.Component {\n\n    constructor() {\n        super()\n        this.state = {\n            user: null\n        }\n    }\n\n    componentWillMount() {\n        const loggedUserJSON = window.localStorage.getItem('loggedUser')\n        if (loggedUserJSON) {\n            const user = JSON.parse(loggedUserJSON)\n            console.log(user)\n            this.setState({ user })\n        }\n    }\n\n    waitForUserLoading = () => {\n        if (typeof this.state.user === undefined) {\n            setTimeout(this.waitForUserLoading(), 250);\n        }\n    }\n\n    isAuthenticated = () => {\n        console.log(this.state.user)\n        this.waitForUserLoading()\n        if (this.state.user !== null) {\n            if (this.state.user.username === \"Matti\") {\n                return true\n            }\n            return false\n        } else {\n            return false\n        }\n    }\n\n    render() {\n        const { component: Component, ...props } = this.props\n\n        return (\n            <Route\n                {...props}\n                render={props => (\n                    this.isAuthenticated ?\n                        <Component {...props} /> :\n                        <Redirect to='/' />\n                )}\n            />\n        )\n    }\n}\n\nexport default ProtectedRoute"]},"metadata":{},"sourceType":"module"}